{% extends 'base1.html' %}
{% load crispy_forms_tags %}
{% load render_table from django_tables2 %}


{% block content %}

<div id="page-wrapper">
    <div class="container-fluid">
        <div class="page-header row">
            <div class=" col-lg-6">
                <h1 style="display: inline;">Summary</h1>
            </div>
        </div>
        <div class=row>
            <div class='col-xs-12'>
                <div class="text-primary">
                    <p><em>Last Updated: {{update_time}}</em></p>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-4">
                <div class=" text-center panel panel-red">
                    <div class='panel-heading'>
                        <div class="small">Total</div>
                        <div class = 'huge'>{{case_count}}</div>
                    </div> 
                </div>
            </div>
            <div class="col-xs-4">
                <div class=" text-center panel panel-primary">
                    <div class='panel-heading'>
                    <div class="small">Active</div>
                    <div class = 'huge'>{{active_count}}</div>
                    </div>
                </div>
            </div>
            <div class="col-xs-4">
                <div class=" text-center panel panel-green">
                    <div class='panel-heading'>
                    <div class="small">Recovered</div>
                    <div class = 'huge'>{{recovery_count}}</div>
                    </div>
                </div>
            </div>
            <div class="col-xs-4">
                <div class=" text-center panel panel-danger">
                    <div class='panel-heading'>
                    <div class="small">Death</div>
                    <div class = 'huge'>{{death_count}}</div>
                    </div>
                </div>
            </div>
            <div class="col-xs-4">
                <div class=" text-center panel panel-info">
                    <div class='panel-heading'>
                    <div class="small">{{free_message}}</div>
                    <div class = 'huge'>{{free_box}}</div>
                    </div>
                </div>
            </div>
            <div class="col-xs-4">
                <div class=" text-center panel panel-success">
                    <div class='panel-heading'>
                    <div class="small">Tested</div>
                    <div class = 'huge'>{{tot_test}}</div>
                    </div>
                </div>
            </div>
            <div class=row>
                <div class='col-xs-12'>
                    <div class="text-primary">
                        <p><em>{{asterisk}}</em></p>
                    </div>
                </div>
            </div>
        </div>
        
        <div class=row>
            <div class="col-lg-12" >
                {% render_table table %}
            </div>
        </div>
        <br>
        <div class="row">
            <div class="col-lg-12 text-center text-primary">
                <p><em>Click on legend on chart to interact</em></p>
            </div>
        </div>
        <div class='row'>
            <div class="col-lg-6">
                <canvas id="countries" width="800" height="950"></canvas>
            </div>
            <div class="col-lg-6">
                <canvas id="cases" width="800" height="950"></canvas>
            </div>
        </div>
        <div class='row'>
            <div class="col-lg-6">
                <canvas id="statedist" width="800" height="950"></canvas>
            </div>
            <div class="col-lg-6">
                <canvas id="topfifteen" width="800" height="1250"></canvas>
            </div>
        </div>  
            
  
            <div class="col-lg-2 col-md-6">
                <div class="panel panel-warning">
                    <div class="panel-heading">
                        <div class="row">
                            <div class="col-xm-3 text-center">
                                <i class="fa fa-bed fa-3x"></i>
                            </div>
                            <div class="col-xm-9 text-right">
                                <div class="huge">{{beds}}</div>
                                <div class = 'huge'>Beds per 1000 Population</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-2 col-md-6">
                <div class="panel panel-success">
                    <div class="panel-heading">
                        <div class="row">
                            <div class="col-xm-3 text-center">
                                <i class="fa fa-user-md fa-3x"></i>
                            </div>
                            <div class="col-xm-9 text-right">
                                <div class="huge">{{docs}}</div>
                                <div class = 'huge'>Docs per 1000 Population</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-2 col-md-6">
                <div class="panel panel-info">
                    <div class="panel-heading">
                        <div class="row">
                            <div class="col-xm-3 text-center">
                                <i class="fa fa-users fa-3x"></i>
                            </div>
                            <div class="col-xm-9 text-right">
                                <div class="huge">{{nurses}}</div>
                                <div class = 'huge'>Nurse per 1000 Population</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-2 col-md-6">
                <div class="panel panel-warning">
                    <div class="panel-heading">
                        <div class="row">
                            <div class="col-xm-3 text-center">
                                <i class="fa fa-bed fa-3x"></i>
                            </div>
                            <div class="col-xm-9 text-right">
                                <div class="huge">{{beds_old}}</div>
                                <div class = 'huge'>Beds per 1000 elderly</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-2 col-md-6">
                <div class="panel panel-success">
                    <div class="panel-heading">
                        <div class="row">
                            <div class="col-xm-3 text-center">
                                <i class="fa fa fa-user-md fa-3x"></i>
                            </div>
                            <div class="col-xm-9 text-right">
                                <div class="huge">{{docs_old}}</div>
                                <div class = 'huge'>Docs per 1000 elderly Popn</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-2 col-md-6">
                <div class="panel panel-info">
                    <div class="panel-heading">
                        <div class="row">
                            <div class="col-xm-3 text-center">
                                <i class="fa fa-users fa-3x"></i>
                            </div>
                            <div class="col-xm-9 text-right">
                                <div class="huge">{{nurses_old}}</div>
                                <div class = 'huge'>Nurses per 1000 elderly</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
    </div>
</div>
<script type="text/javascript">
    $(document).ready(function()
    {
       $('#decline').on('click',function()
       {
           return confirm ('Confirm Defer action?');
       });
    });

</script>
<script type="text/javascript">
    $(document).ready(function()
    {
       $('#complete').on('click',function()
       {
           return confirm ('Confirm Completion Update?');
       });
    });

</script>
<script type="text/javascript">
    $(document).ready(function()
    {
        {%if messages %}
        {% for message in messages %}
        alert('{{message}}');
        {%endfor%}
        {%endif%}

    });

</script>
<script type='text/javascript'>
    $(document).ready(function()
        {
            new Chart(document.getElementById("cases"), {

                type: 'line',
                data: {
                  labels: [{%for k, v in death_dict.items%} '{{k}}', {%endfor%}],
                  datasets: [
                    {
                      data: [{%for k, v in newcase_dict.items %} '{{v}}', {%endfor%}],
                      label: "New Cases",
                      borderColor: "#8e5ea2",
                      pointRadius:0.5,
                      //borderWidth:1,
                      fill:false
                    }, {
                      data: [{%for k, v in recovery_dict.items%} '{{v}}', {%endfor%}],
                      label: "Recovered",
                      borderColor: "#3cba9f",
                      pointRadius:0.5,
                      //borderWidth:1,
                      fill:false
                    }, {
                      data: [{%for k, v in death_dict.items%} '{{v}}', {%endfor%}],
                      label: "Death",
                      borderColor: "#e8c3b9",
                      pointRadius:0.5,
                      //borderWidth:1,
                      fill:false
                    }
                  ]
                },
                options: {
                  title: {display: true,text: 'India Cases (Daily)'},
                  tooltips: { mode: 'index',intersect: false},
                  hover: {mode: 'index',intersect: false}
                }
              });

        });

</script>

<script type='text/javascript'>
    $(document).ready(function()
        {
            new Chart(document.getElementById("countries"), {

                type: 'line',
                data: {
                  labels: [{%for k, v in country_dict.items%} '{{k}}', {%endfor%}],
                  datasets: [
                    {
                      data: [{%for v in francelist %} '{{v}}', {%endfor%}],
                      label: "France",
                      borderColor: "#ff073a",
                      fill: false,
                      hidden: false,
                      pointRadius:0.5,
                      
                    }, {
                      data: [{%for  v in uslist%} '{{v}}', {%endfor%}],
                      label: "US",
                      borderColor: "#28a745",
                      fill: false,
                      hidden: false,
                      pointRadius:0.5,

                    },
                    {
                        data: [{%for v in italylist%} '{{v}}', {%endfor%}],
                        label: "Italy",
                        borderColor: "#342ead",
                        fill:false,
                        hidden: false,
                        pointRadius:0.5,
                      },
                      {
                        data: [{%for  v in spainlist%} '{{v}}', {%endfor%}],
                        label: "Spain",
                        borderColor: "#7D5BA6",
                        fill: false,
                        hidden: false,
                        pointRadius:0.5,
                      },
                      {
                        data: [{%for  v in indialist%} '{{v}}', {%endfor%}],
                        label: "India",
                        borderColor: "#DD7596",
                        fill: false,
                        pointRadius:0.5,
                        //borderWidth:0.5

                      },
                      {
                        data: [{%for  v in uklist%} '{{v}}', {%endfor%}],
                        label: "UK",
                        borderColor: "#16c8f0",
                        fill: false,
                        pointRadius:0.5,
                        //borderWidth:0.5

                      },
                      {
                        data: [{%for  v in germanylist%} '{{v}}', {%endfor%}],
                        label: "Germany",
                        borderColor: "#f67575",
                        fill: false,
                        pointRadius:0.5,
                       // borderWidth:0.5

                      },
                      {
                        data: [{%for  v in iranlist%} '{{v}}', {%endfor%}],
                        label: "Iran",
                        borderColor: "#2b580c",
                        fill: false,
                        pointRadius:0.5,
                        //borderWidth:0.5

                      },
                      {
                        data: [{%for  v in chinalist%} '{{v}}', {%endfor%}],
                        label: "China",
                        borderColor: "#9D44B5",
                        fill: false,
                        pointRadius:0.5,
                        //borderWidth:0.5

                      },
                  ]
                },
                options: {
                  title: {
                    display: true,
                    text: 'India vs Other Major Countries (cumulative) \n (Days since number of cases passed 100)'
                  },
                  tooltips: { mode: 'index',intersect: false},
                  hover: {mode: 'index',intersect: false}
                }
              });

        });

</script>

<script type='text/javascript'>
    $(document).ready(function()
        {
            new Chart(document.getElementById("statedist"), {

                type: 'bar',
                data: {
                  labels: [{%for s in stateslist%} '{{s}}', {%endfor%}],
                  datasets: [
                    {
                      data: [{%for n in statenewcase%} '{{n}}', {%endfor%}],
                      label: "Active Cases",
                      backgroundColor: "blue",
                    }, {
                      data: [{%for d in statedeath%} '{{d}}', {%endfor%}],
                      label: "Deaths",
                      backgroundColor: "red",

                    },
                    {
                        data: [{%for r in staterecovery%} '{{r}}', {%endfor%}],
                        label: "Recoveries",
                        backgroundColor: "green",
                      },
                  ]
                },
                tooltips: {
                    mode: 'point',
                    intersect: false
                },
                options:
                 {
                  title:
                  {
                    display: true,
                    text: 'Statewise cases'
                  },
                  responsive:true,
                  scales:
                  {
                    xAxes:
                    [{
                        stacked: true,
                    }],
                    yAxes:
                    [{
                        stacked: true
                    }]
                },
                tooltips: { mode: 'index',intersect: false},
                  hover: {mode: 'index',intersect: false}
                }
              });

        });

</script>

<script type='text/javascript'>
    $(document).ready(function()
        {
            new Chart(document.getElementById("topfifteen"), {

                type: 'line',
                data: {
                  labels: [{%for k, v in top1.items%} '{{k}}', {%endfor%}],
                  datasets: [
                    {
                      data: [{%for k, v in top1.items%} '{{v}}', {%endfor%}],
                      label: '{{top1_name}}',
                      borderColor: "#ff073a",
                      fill: false,
                      hidden: false,
                      pointRadius:0.5,
                    }, {
                      data: [{%for k, v in top2.items%} '{{v}}', {%endfor%}],
                      label: '{{top2_name}}',
                      borderColor: "#28a745",
                      fill: false,
                      hidden: false,
                      pointRadius:0.5,

                    },
                    {
                        data: [{%for k, v in top3.items%} '{{v}}', {%endfor%}],
                        label: '{{top3_name}}',
                        borderColor: "#342ead",
                        fill:false,
                        hidden: false,
                        pointRadius:0.5,

                      },
                      {
                        data: [{%for k, v in top4.items%} '{{v}}', {%endfor%}],
                        label: '{{top4_name}}',
                        borderColor: "#7D5BA6",
                        fill: false,
                        hidden: false,
                        pointRadius:0.5,
                      },
                      {
                        data: [{%for k, v in top5.items%} '{{v}}', {%endfor%}],
                        label: '{{top5_name}}',
                        borderColor: "#DD7596",
                        fill: false,
                        pointRadius:0.5,

                      },
                      {
                        data: [{%for k, v in top6.items%} '{{v}}', {%endfor%}],
                        label: '{{top6_name}}',
                        borderColor: "#16c8f0",
                        fill: false,
                        hidden: true,
                        pointRadius:0.5,
                      },
                      {
                        data: [{%for k, v in top7.items%} '{{v}}', {%endfor%}],
                        label: '{{top7_name}}',
                        borderColor: "#f67575",
                        fill: false,
                        hidden: true,
                        pointRadius:0.5,
                      },
                      {
                        data: [{%for k, v in top8.items%} '{{v}}', {%endfor%}],
                        label: '{{top8_name}}',
                        borderColor: "#2b580c",
                        fill: false,
                        hidden: true,
                        pointRadius:0.5,
                      },
                      {
                        data: [{%for k, v in top9.items%} '{{v}}', {%endfor%}],
                        label: '{{top9_name}}',
                        borderColor: "#9D44B5",
                        fill: false,
                        hidden: true,
                        pointRadius:0.5,
                      },
                      {
                        data: [{%for k, v in top10.items%} '{{v}}', {%endfor%}],
                        label: '{{top10_name}}',
                        borderColor: "#91132d",
                        fill: false,
                        hidden: true,
                        pointRadius:0.5,
                      },
                      {
                        data: [{%for k, v in top11.items%} '{{v}}', {%endfor%}],
                        label: '{{top11_name}}',
                        borderColor: "#6D9DC5",
                        fill: false,
                        hidden: true,
                        pointRadius:0.5,
                      },
                      {
                        data: [{%for k, v in top12.items%} '{{v}}', {%endfor%}],
                        label: '{{top12_name}}',
                        borderColor: "#2b580c",
                        fill: false,
                        hidden: true,
                        pointRadius:0.5,
                      },
                      {
                        data: [{%for k, v in top13.items%} '{{v}}', {%endfor%}],
                        label: '{{top13_name}}',
                        borderColor: "#6c757d",
                        fill: false,
                        hidden: true,
                        pointRadius:0.5,
                      },
                      {
                        data: [{%for k, v in top14.items%} '{{v}}', {%endfor%}],
                        label: '{{top14_name}}',
                        borderColor: "#f67575",
                        fill: false,
                        hidden: true,
                        pointRadius:0.5,
                      },
                      {
                        data: [{%for k, v in top15.items%} '{{v}}', {%endfor%}],
                        label: '{{top15_name}}',
                        borderColor: "#d4f8e8",
                        fill: false,
                        hidden: true,
                        pointRadius:0.5,
                      },
                      
                  ]
                },
                options: {
                  title: {
                    display: true,
                    text: ['India Top 15 states (cumulative)', 'Click legend to select visible states']
                  },
                  tooltips: { mode: 'index',intersect: false},
                  hover: {mode: 'index',intersect: false},
                }
              });

        });

</script>

<script>
    $(document).ready( function () {
        $('#table').DataTable({ 
            responsive: false,
            "order": [[ 1, "desc" ]],
            "paging":false,
            "searching": false
            
        });

    } );
</script> 
<script type='text/javascript'>
    //$( ".row" ).hide();
    var time = 1500;
    $(document).ready(function(){
        //$( ".row" ).slideUp();
        $( ".row" ).each(function(index, element){
            //setTimeout( function(){ $(element).slideDown(); }, time)
            //$(element).delay(1000).slideDown();
            //$(element).fadeIn("slow");
            //setTimeOut(2000);
        });

    });
   

</script>

{%endblock%}